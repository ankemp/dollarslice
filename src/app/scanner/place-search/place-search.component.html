<div class="app-container">
  <button *ngIf="!(coords | async) && !(location.active | async)" class="pure-button pure-button-primary find-me" [disabled]="(locating | async)"
    (click)="findMe()"><i [ngClass]="{'material-icons-spin': (locating | async)}" class="material-icons">{{ (locating | async) ? 'autorenew' : 'my_location' }}</i> Find Me</button>
  <div *ngIf="(coords | async) && !(location.active | async)" class="map-container">
    <agm-map [latitude]="(coords | async)?.latitude" [longitude]="(coords | async)?.longitude" [mapDraggable]="false" [streetViewControl]="false"
      [zoomControl]="false" [panControl]="false" [gestureHandling]="false" [maxZoom]="17" [minZoom]="17" [zoom]="17">
      <agm-marker [latitude]="(coords | async)?.latitude" [longitude]="(coords | async)?.longitude"></agm-marker>
    </agm-map>
    <div class="map-actions">
      <button class="pure-button pure-button-primary" (click)="findMe(true)" [disabled]="(locating | async)"><i [ngClass]="{'material-icons-spin': (locating | async)}" class="material-icons">{{ (locating | async) ? 'autorenew' : 'my_location' }}</i> Increase Accuracy</button>
      <button class="pure-button pure-button-primary" (click)="searchYelp()">That's me!</button>
    </div>
  </div>
  <app-status *ngIf="(location.active | async)" [object]="location.active"></app-status>
  <div *ngIf="(location.active | async)" class="search-container">
    <div *ngFor="let place of (location.active | async)?.results" id="{{ place.id }}" class="place">
      <img class="thumb" src="{{ place.image_url }}" alt="{{ place.name }}">
      <div class="content">
        <div class="name">{{ place.name }}</div>
        <div class="distance">{{ place.distance | round: 2 }} {{ place.distance_unit }} away</div>
      </div>
      <button class="choose-location" (click)="chooseLocation(place)"><i class="material-icons">add_location</i></button>
    </div>
  </div>
</div>
